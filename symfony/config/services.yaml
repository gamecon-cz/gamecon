parameters:
    # Database configuration from GameCon environment variables
    gamecon.db.host: '%env(GAMECON_DB_HOST)%'
    gamecon.db.port: '%env(GAMECON_DB_PORT)%'
    gamecon.db.name: '%env(GAMECON_DB_NAME)%'
    gamecon.db.user: '%env(GAMECON_DB_USER)%'
    gamecon.db.password: '%env(GAMECON_DB_PASSWORD)%'

services:
    _defaults:
        autowire: true
        autoconfigure: true
        bind:
            $projectDir: '%kernel.project_dir%'

    App\:
        resource: '../src/'
        exclude:
            - '../src/Kernel.php'

    # Legacy integration services
    legacy.session:
        class: 'App\Service\LegacySessionService'
        public: true

    app.clock:
        decorates: 'clock'
        parent: 'clock'
        public: true

    # JWT service for cross-app authentication
    App\Service\JwtService:
        public: true
        arguments:
            $secret: '%env(APP_SECRET)%' # Use the same secret as Symfony app
            $legacyCacheDir: !php/const SPEC # Use cache directory that both apps can access
